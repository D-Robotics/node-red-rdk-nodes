[
    {
        "id": "bev_tab",
        "type": "tab",
        "label": "BEVæ„ŸçŸ¥ç®—æ³•",
        "disabled": false,
        "info": "# BEVæ„ŸçŸ¥ç®—æ³•\n\n## åŠŸèƒ½ä»‹ç»\n\nBEVæ„ŸçŸ¥ç®—æ³•æ˜¯ä½¿ç”¨OpenExploreråœ¨nuscenesæ•°æ®é›†ä¸Šè®­ç»ƒå‡ºæ¥çš„BEVå¤šä»»åŠ¡æ¨¡å‹ã€‚\n\nç®—æ³•è¾“å…¥ä¸º6ç»„å›¾åƒæ•°æ®ï¼Œåˆ†åˆ«æ˜¯å‰è§†ï¼Œå·¦å‰ï¼Œå³å‰ï¼Œåè§†ï¼Œå·¦åï¼Œå³åå›¾ã€‚æ¨¡å‹è¾“å‡ºä¸º10ä¸ªç±»åˆ«çš„ç›®æ ‡ä»¥åŠå¯¹åº”çš„3Dæ£€æµ‹æ¡†ï¼ŒåŒ…æ‹¬éšœç¢ç‰©ã€å¤šç§ç±»å‹è½¦è¾†ã€äº¤é€šæ ‡å¿—ç­‰ï¼Œä»¥åŠè½¦é“çº¿ã€äººè¡Œé“ã€é©¬è·¯è¾¹ç¼˜çš„è¯­ä¹‰åˆ†å‰²ã€‚\n\næ­¤ç¤ºä¾‹ä½¿ç”¨æœ¬åœ°å›¾åƒæ•°æ®ä½œä¸ºè¾“å…¥ï¼Œåˆ©ç”¨BPUè¿›è¡Œç®—æ³•æ¨ç†ï¼Œå‘å¸ƒç®—æ³•æ„ŸçŸ¥ç»“æœæ¸²æŸ“çš„å›¾ç‰‡æ¶ˆæ¯ï¼Œåœ¨PCç«¯æµè§ˆå™¨ä¸Šæ¸²æŸ“æ˜¾ç¤ºç®—æ³•ç»“æœã€‚\n\n## ä½¿ç”¨æµç¨‹\n\n1. **å¯åŠ¨BEVç®—æ³•**ï¼šç‚¹å‡»\"ğŸš€ å¯åŠ¨BEVç®—æ³•\"æŒ‰é’®\n2. **æŸ¥çœ‹ç»“æœ**ï¼šç‚¹å‡»\"ğŸ‘ï¸ æ‰“å¼€å¯è§†åŒ–é¡µé¢\"åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ç»“æœ\n\n## æ”¯æŒå¹³å°\n\n- RDK Ultra (Ubuntu 20.04 Foxy)\n- RDK S100, RDK S100P (Ubuntu 22.04 Humble)\n\n## ä»£ç ä»“åº“\n\nhttps://github.com/D-Robotics/hobot_bev.git\n\n## æ³¨æ„äº‹é¡¹\n\n- ç®—æ³•ç»“æœä¼šå‘å¸ƒåˆ° `/image_jpeg` è¯é¢˜\n- å¯ä»¥é€šè¿‡WebSocketåœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹ï¼ˆhttp://IP:8000ï¼‰",
        "env": []
    },
    {
        "id": "comment_start",
        "type": "comment",
        "z": "bev_tab",
        "name": "ğŸš€ å¯åŠ¨BEVç®—æ³•",
        "info": "å¯åŠ¨BEVæ„ŸçŸ¥ç®—æ³•",
        "x": 150,
        "y": 40,
        "wires": []
    },
    {
        "id": "inject_start_bev",
        "type": "inject",
        "z": "bev_tab",
        "name": "ğŸš€ å¯åŠ¨BEVç®—æ³•",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 80,
        "wires": [
            [
                "function_build_cmd"
            ]
        ]
    },
    {
        "id": "function_build_cmd",
        "type": "function",
        "z": "bev_tab",
        "name": "æ„å»ºå¯åŠ¨å‘½ä»¤",
        "func": "// æ„å»ºBEVç®—æ³•å¯åŠ¨å‘½ä»¤\n// æ ¹æ®ç”¨æˆ·æä¾›çš„å¯åŠ¨å‘½ä»¤ï¼š\n// source /opt/tros/humble/setup.bash\n// if [ -L qat ]; then rm qat; fi\n// ln -s `ros2 pkg prefix hobot_bev`/lib/hobot_bev/qat/ qat\n// ln -s ~/hobot_bev_data/nuscenes_bev_val nuscenes_bev_val\n// ros2 launch hobot_bev hobot_bev.launch.py\n\n// æ„å»ºå¯åŠ¨å‘½ä»¤ï¼ˆæ‰€æœ‰å‘½ä»¤ç”¨ && è¿æ¥ï¼Œåœ¨å·¥ä½œç›®å½•ä¸­æ‰§è¡Œï¼‰\n// æ³¨æ„ï¼šln å‘½ä»¤çš„é”™è¯¯ä¸å½±å“è¿è¡Œï¼Œä½¿ç”¨ || true å¿½ç•¥é”™è¯¯\nvar cmd = 'cd ~/hobot_bev_data && ';\ncmd += 'source /opt/tros/humble/setup.bash && ';\ncmd += 'if [ -L qat ]; then rm qat; fi && ';\ncmd += 'ln -s `ros2 pkg prefix hobot_bev`/lib/hobot_bev/qat/ qat && ';\ncmd += '(ln -s ~/hobot_bev_data/nuscenes_bev_val nuscenes_bev_val 2>/dev/null || true) && ';\ncmd += 'ros2 launch hobot_bev hobot_bev.launch.py';\n\nmsg.payload = cmd;\n\nnode.status({\n    fill: \"blue\",\n    shape: \"dot\",\n    text: \"å‘½ä»¤å·²æ„å»º\"\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 80,
        "wires": [
            [
                "exec_start_bev"
            ]
        ]
    },
    {
        "id": "exec_start_bev",
        "type": "exec",
        "z": "bev_tab",
        "name": "å¯åŠ¨BEVç®—æ³•",
        "command": "",
        "addpay": true,
        "append": "",
        "useSpawn": true,
        "timer": "0",
        "oldrc": false,
        "x": 550,
        "y": 80,
        "wires": [
            [
                "debug_output"
            ],
            [
                "debug_error"
            ],
            []
        ]
    },
    {
        "id": "debug_output",
        "type": "debug",
        "z": "bev_tab",
        "name": "å¯åŠ¨è¾“å‡º",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 750,
        "y": 60,
        "wires": []
    },
    {
        "id": "debug_error",
        "type": "debug",
        "z": "bev_tab",
        "name": "å¯åŠ¨é”™è¯¯",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": false,
        "complete": "payload",
        "targetType": "msg",
        "x": 750,
        "y": 100,
        "wires": []
    },
    {
        "id": "comment_view",
        "type": "comment",
        "z": "bev_tab",
        "name": "ğŸ‘ï¸ æŸ¥çœ‹ç»“æœ",
        "info": "åœ¨æµè§ˆå™¨ä¸­æŸ¥çœ‹å®æ—¶æ£€æµ‹ç»“æœï¼ˆè§†é¢‘æµï¼‰",
        "x": 150,
        "y": 160,
        "wires": []
    },
    {
        "id": "inject_browser",
        "type": "inject",
        "z": "bev_tab",
        "name": "æ‰“å¼€å¯è§†åŒ–é¡µé¢",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 200,
        "wires": [
            [
                "function_get_url"
            ]
        ]
    },
    {
        "id": "function_get_url",
        "type": "function",
        "z": "bev_tab",
        "name": "è·å–URL",
        "func": "msg.payload = 'http://{host}:8000';\n\nnode.status({\n    fill: \"blue\",\n    shape: \"dot\",\n    text: \"Opening: \" + msg.payload\n});\n\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 350,
        "y": 200,
        "wires": [
            [
                "openurl"
            ]
        ]
    },
    {
        "id": "openurl",
        "type": "rdk-tools openurl",
        "z": "bev_tab",
        "name": "æ‰“å¼€æµè§ˆå™¨",
        "x": 550,
        "y": 200,
        "wires": []
    },
    {
        "id": "comment_stop",
        "type": "comment",
        "z": "bev_tab",
        "name": "â¹ï¸ åœæ­¢æœåŠ¡",
        "info": "",
        "x": 150,
        "y": 260,
        "wires": []
    },
    {
        "id": "inject_stop",
        "type": "inject",
        "z": "bev_tab",
        "name": "åœæ­¢æ‰€æœ‰æœåŠ¡",
        "props": [
            {
                "p": "payload"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "topic": "",
        "payload": "",
        "payloadType": "date",
        "x": 140,
        "y": 300,
        "wires": [
            [
                "exec_stop"
            ]
        ]
    },
    {
        "id": "exec_stop",
        "type": "exec",
        "z": "bev_tab",
        "name": "åœæ­¢æœåŠ¡",
        "command": "sudo pkill -9 -f hobot_usb_cam; sudo pkill -9 -f hobot_bev; sudo pkill -9 -f hobot_codec_republish; sudo pkill -9 -f websocket; sudo pkill -9 -f python3; sudo pkill -9 -f 'ros2 launch'; sudo pkill -9 -f 'ros2 run'; sleep 2; sudo rm -rf /dev/shm/*; ros2 daemon stop 2>/dev/null; sleep 1; echo 'âœ“ æœåŠ¡å·²å½»åº•åœæ­¢ï¼Œèµ„æºå·²é‡Šæ”¾'",
        "addpay": false,
        "append": "",
        "useSpawn": false,
        "timer": "10",
        "oldrc": false,
        "x": 350,
        "y": 300,
        "wires": [
            [
                "debug_stop"
            ],
            [],
            []
        ]
    },
    {
        "id": "debug_stop",
        "type": "debug",
        "z": "bev_tab",
        "name": "åœæ­¢çŠ¶æ€",
        "active": true,
        "tosidebar": true,
        "console": false,
        "tostatus": true,
        "complete": "payload",
        "targetType": "msg",
        "statusVal": "payload",
        "statusType": "auto",
        "x": 550,
        "y": 300,
        "wires": []
    }
]
